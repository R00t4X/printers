# printers

## Описание

Скрипт `print.sh` предназначен для автоматизации установки и настройки принтеров в Linux-системах. Поддерживает автоматическую и ручную установку драйверов, работу с архивами, управление группами пользователей, а также установку специфических пакетов для Canon и Kyocera.

## Основные возможности

- Проверка и установка необходимых утилит (`wget`, `apt-get`, `lpadmin`, `lpinfo`, `lpstat`, `lpoptions`, `hp-setup`, `lsusb`, `7z`).
- Добавление групп пользователей и включение в них пользователей из группы `domain users` (через `roleadd` и `gpasswd`).
- Интерактивное удаление выбранных пользователем принтеров.
- Автоматическое определение подключённых принтеров через USB.
- Установка драйверов из PPD-файлов, SH/RUN-скриптов, архивов (`.zip`, `.tar.gz`, `.tar`, и др.).
- Для Kyocera: автоматическая установка пакета `rastertokpsl-re`.
- Для Canon: автоматическая проверка и добавление репозитория, установка пакетов `canon-printer-drivers` и `cnijfilter2`.
- После установки — выбор принтера по умолчанию и отправка тестовой страницы.
- Ведение лога установки (`/var/log/printer_install.log`).

## Использование

```bash
sudo ./print.sh
```

### Основные этапы работы

1. **Выбор режима установки**: автоматический по ссылке или ручной с выбором типа файла.
2. **Проверка и установка зависимостей**.
3. **(Опционально) Удаление выбранных пользователем принтеров**.
4. **Проверка подключения принтера** (автоматически и вручную).
5. **Скачивание и установка драйвера**.
6. **Выбор принтера по умолчанию и отправка тестовой страницы**.

### Поддерживаемые типы драйверов

- `.ppd` — установка через `lpadmin`
- `.sh`, `.run` — установка через скрипт (в том числе `hp-install.sh` с последующим запуском `hp-setup`)
- Архивы: `.zip`, `.tar.gz`, `.tgz`, `.tar`, другие (через `7z`)

### Особенности для Canon и Kyocera

- **Kyocera**: автоматически устанавливается пакет `rastertokpsl-re` (если не установлен).
- **Canon**: автоматически добавляется репозиторий и устанавливаются пакеты `canon-printer-drivers` и `cnijfilter2` (если не установлены).

## Логирование

Все действия и ошибки записываются в `/var/log/printer_install.log`.

## Требования

- Linux-система с поддержкой CUPS.
- Права суперпользователя (`root`).
- Интернет-соединение для скачивания драйверов и пакетов.

## Пример запуска

```bash
sudo ./print.sh
```

## Лицензия

MIT